# KejiCode (æŸ¯åŸºCode)

ä¸€ä¸ªåŸºäº Java å’Œ LangChain4j æ‰“é€ çš„ç±»ä¼¼ Claude Code çš„ç»ˆç«¯ä»£ç ç¼–ç¨‹å·¥å…·ã€‚

## é¡¹ç›®æ¦‚è¿°

KejiCode (æŸ¯åŸºCode) æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„ç»ˆç«¯ç¼–ç¨‹åŠ©æ‰‹,å®ƒç»“åˆäº† LangChain4j æ¡†æ¶å’Œ Anthropic Claude æ¨¡å‹,ä¸ºå¼€å‘è€…æä¾›æ™ºèƒ½çš„ä»£ç è¾…åŠ©åŠŸèƒ½ã€‚è¯¥å·¥å…·å¯ä»¥å¸®åŠ©å¼€å‘è€…å®Œæˆæ–‡ä»¶è¯»å†™ã€ä»£ç æœç´¢ã€å‘½ä»¤æ‰§è¡Œç­‰å„ç§ç¼–ç¨‹ä»»åŠ¡ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½å¯¹è¯äº¤äº’
- åŸºäº Claude 3.5 Sonnet æ¨¡å‹çš„è‡ªç„¶è¯­è¨€ç†è§£
- ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å¯¹è¯å†å²ç®¡ç†
- æ™ºèƒ½å·¥å…·è°ƒç”¨å’Œä»»åŠ¡æ‰§è¡Œ

### 2. æ–‡ä»¶æ“ä½œå·¥å…·

#### Read (æ–‡ä»¶è¯»å–)
- è¯»å–æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶
- æ”¯æŒè¡Œåç§»å’Œé™åˆ¶è¯»å–
- è‡ªåŠ¨æˆªæ–­è¿‡é•¿çš„è¡Œ(è¶…è¿‡ 2000 å­—ç¬¦)
- æä¾›å¸¦è¡Œå·çš„è¾“å‡ºæ ¼å¼

**ä½¿ç”¨ç¤ºä¾‹:**
```
è¯»å– pom.xml æ–‡ä»¶
æŸ¥çœ‹ src/main/java/Main.java çš„å†…å®¹
```

#### Write (æ–‡ä»¶å†™å…¥)
- åˆ›å»ºæ–°æ–‡ä»¶æˆ–è¦†ç›–å·²æœ‰æ–‡ä»¶
- è‡ªåŠ¨åˆ›å»ºçˆ¶ç›®å½•
- æ”¯æŒä»»æ„æ–‡æœ¬å†…å®¹å†™å…¥

**ä½¿ç”¨ç¤ºä¾‹:**
```
åˆ›å»ºä¸€ä¸ªæ–°çš„ README.md æ–‡ä»¶
å†™å…¥é…ç½®åˆ° application.properties
```

#### Edit (æ–‡ä»¶ç¼–è¾‘)
- ç²¾ç¡®çš„å­—ç¬¦ä¸²æ›¿æ¢åŠŸèƒ½
- æ”¯æŒå•æ¬¡æ›¿æ¢æˆ–å…¨éƒ¨æ›¿æ¢
- é˜²æ­¢æ„å¤–çš„å¤šå¤„ä¿®æ”¹(éœ€è¦æ˜¾å¼æŒ‡å®š replace_all)

**ä½¿ç”¨ç¤ºä¾‹:**
```
å°† Main.java ä¸­çš„ oldMethod é‡å‘½åä¸º newMethod
æ›¿æ¢æ‰€æœ‰çš„ TODO æ³¨é‡Š
```

#### Glob (æ–‡ä»¶æœç´¢)
- åŸºäºæ¨¡å¼åŒ¹é…æŸ¥æ‰¾æ–‡ä»¶
- æ”¯æŒé€šé…ç¬¦æ¨¡å¼(å¦‚ `**/*.java`, `src/**/*.xml`)
- æŒ‰ä¿®æ”¹æ—¶é—´æ’åºç»“æœ
- è‡ªåŠ¨è·³è¿‡å¸¸è§çš„å¿½ç•¥ç›®å½•(node_modules, target, build ç­‰)

**ä½¿ç”¨ç¤ºä¾‹:**
```
æŸ¥æ‰¾æ‰€æœ‰çš„ Java æ–‡ä»¶
æœç´¢ src ç›®å½•ä¸‹çš„æ‰€æœ‰ XML é…ç½®æ–‡ä»¶
```

#### Grep (å†…å®¹æœç´¢)
- å¼ºå¤§çš„æ­£åˆ™è¡¨è¾¾å¼æœç´¢
- å¤šç§è¾“å‡ºæ¨¡å¼:
  - `files_with_matches`: ä»…æ˜¾ç¤ºåŒ…å«åŒ¹é…çš„æ–‡ä»¶è·¯å¾„
  - `content`: æ˜¾ç¤ºåŒ¹é…çš„è¡Œå†…å®¹
  - `count`: æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„åŒ¹é…æ¬¡æ•°
- æ”¯æŒä¸Šä¸‹æ–‡è¡Œæ˜¾ç¤º(-A, -B, -C)
- æ”¯æŒå¤§å°å†™ä¸æ•æ„Ÿæœç´¢(-i)
- æ–‡ä»¶ç±»å‹è¿‡æ»¤(Java, JS, Python ç­‰)
- Glob æ¨¡å¼è¿‡æ»¤

**ä½¿ç”¨ç¤ºä¾‹:**
```
æœç´¢æ‰€æœ‰åŒ…å« "TODO" çš„æ–‡ä»¶
åœ¨ Java æ–‡ä»¶ä¸­æŸ¥æ‰¾ "public class" å®šä¹‰
```

#### Bash (å‘½ä»¤æ‰§è¡Œ)
- æ‰§è¡Œ Shell å‘½ä»¤
- æ”¯æŒè¶…æ—¶æ§åˆ¶(é»˜è®¤ 2 åˆ†é’Ÿ)
- è·¨å¹³å°æ”¯æŒ(Unix/Linux/macOS ä½¿ç”¨ bash, Windows uses cmd)
- åˆå¹¶æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡º

**ä½¿ç”¨ç¤ºä¾‹:**
```
è¿è¡Œ mvn clean package
æ‰§è¡Œ git status
æŸ¥çœ‹å½“å‰ç›®å½•ç»“æ„
```

### 3. ç»ˆç«¯ç”¨æˆ·ç•Œé¢

#### äº¤äº’å¼å‘½ä»¤è¡Œ
- åŸºäº JLine 3 çš„ç°ä»£ç»ˆç«¯ UI
- æ”¯æŒå‘½ä»¤å†å²å’Œç¼–è¾‘
- ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

#### å†…ç½®å‘½ä»¤
- `/help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `/clear` - æ¸…å±
- `/reset` - æ¸…é™¤å¯¹è¯å†å²
- `/version` - æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
- `/exit` æˆ– `/quit` - é€€å‡ºç¨‹åº

## æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **Java 17**: ç°ä»£ Java ç‰¹æ€§(Records, Pattern Matching ç­‰)
- **LangChain4j**: AI åº”ç”¨å¼€å‘æ¡†æ¶
- **Anthropic Claude**: å…ˆè¿›çš„ AI è¯­è¨€æ¨¡å‹
- **Maven**: é¡¹ç›®æ„å»ºå’Œä¾èµ–ç®¡ç†
- **PicoCLI**: å‘½ä»¤è¡Œå‚æ•°è§£æ
- **JLine 3**: ç»ˆç«¯äº¤äº’ç•Œé¢
- **Lombok**: å‡å°‘æ ·æ¿ä»£ç 
- **SLF4J + Logback**: æ—¥å¿—ç®¡ç†
- **Jackson**: JSON å¤„ç†

### é¡¹ç›®ç»“æ„
```
kejiCode/
â”œâ”€â”€ pom.xml                          # Maven é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/codeassistant/
â”‚   â”‚   â”‚   â”œâ”€â”€ Main.java            # ä¸»å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CodeAssistantAgent.java   # AI Agent æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Tool.java                 # å·¥å…·æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ToolResult.java           # å·¥å…·æ‰§è¡Œç»“æœ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReadFileTool.java         # æ–‡ä»¶è¯»å–å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WriteFileTool.java        # æ–‡ä»¶å†™å…¥å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditFileTool.java         # æ–‡ä»¶ç¼–è¾‘å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GlobTool.java             # æ–‡ä»¶æœç´¢å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GrepTool.java             # å†…å®¹æœç´¢å·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ BashTool.java             # å‘½ä»¤æ‰§è¡Œå·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TerminalUI.java           # ç»ˆç«¯ç•Œé¢
â”‚   â”‚   â”‚   â””â”€â”€ config/
â”‚   â”‚   â”‚       â””â”€â”€ Configuration.java        # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.properties        # åº”ç”¨é…ç½®
â”‚   â”‚       â””â”€â”€ logback.xml                   # æ—¥å¿—é…ç½®
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/com/codeassistant/           # æµ‹è¯•ä»£ç 
â””â”€â”€ README.md                                  # æœ¬æ–‡æ¡£
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

#### 1. CodeAssistantAgent
AI Agent çš„æ ¸å¿ƒå®ç°,è´Ÿè´£:
- ä¸ Claude æ¨¡å‹é€šä¿¡
- ç®¡ç†å¯¹è¯å†å²
- åè°ƒå·¥å…·è°ƒç”¨
- å¤„ç†å·¥å…·æ‰§è¡Œç»“æœ
- ç”Ÿæˆæ™ºèƒ½å“åº”

**å…³é”®ç‰¹æ€§:**
- å·¥å…·è‡ªåŠ¨æ³¨å†Œæœºåˆ¶
- ä¸Šä¸‹æ–‡ä¿æŒçš„å¤šè½®å¯¹è¯
- å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ¢å¤
- ç³»ç»Ÿæç¤ºè¯ä¼˜åŒ–

#### 2. Tool System
å¯æ‰©å±•çš„å·¥å…·ç³»ç»Ÿè®¾è®¡:
- ç»Ÿä¸€çš„ Tool æ¥å£
- æ ‡å‡†åŒ–çš„ ToolResult è¿”å›æ ¼å¼
- JSON å‚æ•°ä¼ é€’
- ç±»å‹å®‰å…¨çš„å·¥å…·æ³¨å†Œ

**å·¥å…·æ‰§è¡Œæµç¨‹:**
1. AI æ¨¡å‹å†³å®šè°ƒç”¨å“ªä¸ªå·¥å…·
2. ç”Ÿæˆ JSON æ ¼å¼çš„å‚æ•°
3. Agent æ ¹æ®å·¥å…·åæŸ¥æ‰¾å¹¶æ‰§è¡Œ
4. å·¥å…·è¿”å›ç»“æ„åŒ–ç»“æœ
5. ç»“æœæ·»åŠ åˆ°å¯¹è¯å†å²
6. AI ç”Ÿæˆåç»­å“åº”

#### 3. Configuration
çµæ´»çš„é…ç½®ç®¡ç†:
- æ”¯æŒé…ç½®æ–‡ä»¶
- ç¯å¢ƒå˜é‡ä¼˜å…ˆ
- å‘½ä»¤è¡Œå‚æ•°è¦†ç›–
- åˆç†çš„é»˜è®¤å€¼

**é…ç½®ä¼˜å…ˆçº§(ä»é«˜åˆ°ä½):**
1. å‘½ä»¤è¡Œå‚æ•°
2. ç¯å¢ƒå˜é‡
3. application.properties
4. ç¡¬ç¼–ç é»˜è®¤å€¼

#### 4. Terminal UI
ç”¨æˆ·å‹å¥½çš„ç»ˆç«¯ç•Œé¢:
- æ¸…æ™°çš„æç¤ºç¬¦å’Œè¾“å‡ºæ ¼å¼
- Ctrl+C ä¼˜é›…é€€å‡º
- å‘½ä»¤å†å²è®°å½•
- å½©è‰²è¾“å‡º(é€šè¿‡ JLine)

## å®ç°ç»†èŠ‚

### 1. LangChain4j é›†æˆ

#### æ¨¡å‹åˆå§‹åŒ–
```java
AnthropicChatModel chatModel = AnthropicChatModel.builder()
    .apiKey(apiKey)
    .modelName("claude-3-5-sonnet-20241022")
    .temperature(0.7)
    .maxTokens(4096)
    .build();
```

#### å¯¹è¯ç®¡ç†
ä½¿ç”¨ `List<ChatMessage>` ç»´æŠ¤å¯¹è¯å†å²:
- SystemMessage: ç³»ç»Ÿæç¤ºè¯
- UserMessage: ç”¨æˆ·è¾“å…¥
- AiMessage: AI å“åº”
- ToolExecutionResultMessage: å·¥å…·æ‰§è¡Œç»“æœ

#### å·¥å…·è°ƒç”¨æµç¨‹
```java
// 1. ç”¨æˆ·å‘é€æ¶ˆæ¯
conversationHistory.add(UserMessage.from(userMessage));

// 2. AI ç”Ÿæˆå“åº”
Response<AiMessage> response = chatModel.generate(conversationHistory);
AiMessage aiMessage = response.content();

// 3. æ£€æŸ¥å·¥å…·è°ƒç”¨è¯·æ±‚
if (aiMessage.hasToolExecutionRequests()) {
    for (ToolExecutionRequest request : aiMessage.toolExecutionRequests()) {
        // 4. æ‰§è¡Œå·¥å…·
        ToolResult result = tool.execute(request.arguments());

        // 5. æ·»åŠ ç»“æœåˆ°å†å²
        conversationHistory.add(ToolExecutionResultMessage.from(request, result));
    }

    // 6. è·å–åç»­å“åº”
    Response<AiMessage> followUp = chatModel.generate(conversationHistory);
}
```

### 2. æ–‡ä»¶æ“ä½œå®‰å…¨æ€§

#### è·¯å¾„éªŒè¯
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- åŒºåˆ†æ–‡ä»¶å’Œç›®å½•
- é˜²æ­¢è·¯å¾„éå†æ”»å‡»

#### é”™è¯¯å¤„ç†
- IOException æ•è·å’Œå‹å¥½æç¤º
- æ–‡ä»¶æƒé™æ£€æŸ¥
- ç£ç›˜ç©ºé—´è€ƒè™‘

#### ç¤ºä¾‹:è¯»å–æ–‡ä»¶çš„å®‰å…¨æ£€æŸ¥
```java
Path path = Paths.get(filePath);

if (!Files.exists(path)) {
    return ToolResult.failure("File does not exist: " + filePath);
}

if (Files.isDirectory(path)) {
    return ToolResult.failure("Path is a directory, not a file: " + filePath);
}
```

### 3. æœç´¢æ€§èƒ½ä¼˜åŒ–

#### Glob å·¥å…·ä¼˜åŒ–
- ä½¿ç”¨ NIO.2 çš„ PathMatcher é«˜æ•ˆåŒ¹é…
- è·³è¿‡å¸¸è§çš„å¤§å‹ç›®å½•(node_modules, target)
- æŒ‰ä¿®æ”¹æ—¶é—´æ’åº,æä¾›æœ€ç›¸å…³ç»“æœ

#### Grep å·¥å…·ä¼˜åŒ–
- ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ä»¥æé«˜é‡ç”¨æ€§
- æµå¼è¯»å–æ–‡ä»¶é¿å…å†…å­˜æº¢å‡º
- æ”¯æŒæå‰ç»ˆæ­¢(head_limit)

### 4. å¹¶å‘å’Œèµ„æºç®¡ç†

#### å‘½ä»¤è¶…æ—¶
Bash å·¥å…·å®ç°è¶…æ—¶æœºåˆ¶:
```java
boolean completed = process.waitFor(timeout, TimeUnit.MILLISECONDS);
if (!completed) {
    process.destroyForcibly();
    return ToolResult.failure("Command timed out");
}
```

#### èµ„æºæ¸…ç†
- ä½¿ç”¨ try-with-resources ç®¡ç†æµ
- ç»ˆç«¯æ­£ç¡®å…³é—­
- è¿›ç¨‹å¼ºåˆ¶é”€æ¯

### 5. æ—¥å¿—è®°å½•

#### åˆ†çº§æ—¥å¿—
- DEBUG: è¯¦ç»†çš„æ‰§è¡Œä¿¡æ¯
- INFO: é‡è¦äº‹ä»¶
- WARN: è­¦å‘Šä¿¡æ¯
- ERROR: é”™è¯¯å’Œå¼‚å¸¸

#### æ—¥å¿—è¾“å‡º
- æ§åˆ¶å°è¾“å‡º(å®æ—¶åé¦ˆ)
- æ–‡ä»¶è¾“å‡º(æŒä¹…åŒ–è®°å½•)
- æŒ‰æ—¥æ»šåŠ¨(é¿å…æ—¥å¿—æ–‡ä»¶è¿‡å¤§)

## ä½¿ç”¨æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6+
- Anthropic API Key

### å®‰è£…æ­¥éª¤

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®**
```bash
cd kejiCode
```

2. **é…ç½® API Key**

è®¾ç½®ç¯å¢ƒå˜é‡:
```bash
export ANTHROPIC_API_KEY=your-api-key-here
```

æˆ–åœ¨ `src/main/resources/application.properties` ä¸­é…ç½®ã€‚

3. **æ„å»ºé¡¹ç›®**
```bash
mvn clean package
```

è¿™å°†åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¾èµ–çš„å¯æ‰§è¡Œ JAR æ–‡ä»¶ã€‚

### è¿è¡Œæ–¹å¼

#### æ–¹å¼ 1: ä½¿ç”¨ Maven è¿è¡Œ
```bash
mvn exec:java -Dexec.mainClass="com.kejicode.Main"
```

#### æ–¹å¼ 2: è¿è¡Œæ‰“åŒ…åçš„ JAR
```bash
java -jar target/kejiCode-1.0.0.jar
```

#### æ–¹å¼ 3: å¸¦å‘½ä»¤è¡Œå‚æ•°è¿è¡Œ
```bash
java -jar target/kejiCode-1.0.0.jar \
  --api-key YOUR_API_KEY \
  --model claude-3-5-sonnet-20241022 \
  --dir /path/to/working/directory \
  --verbose
```

### å‘½ä»¤è¡Œå‚æ•°

- `-k, --api-key <key>` - Anthropic API Key (è¦†ç›–ç¯å¢ƒå˜é‡)
- `-m, --model <name>` - æ¨¡å‹åç§° (é»˜è®¤: claude-3-5-sonnet-20241022)
- `-d, --dir <path>` - å·¥ä½œç›®å½• (é»˜è®¤: å½“å‰ç›®å½•)
- `-v, --verbose` - å¯ç”¨è¯¦ç»†æ—¥å¿—
- `-h, --help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `-V, --version` - æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

### ä½¿ç”¨ç¤ºä¾‹

#### ç¤ºä¾‹ 1: æ–‡ä»¶åˆ†æ
```
> åˆ†æ pom.xml æ–‡ä»¶,å‘Šè¯‰æˆ‘é¡¹ç›®ä½¿ç”¨äº†å“ªäº›ä¸»è¦ä¾èµ–

AI ä¼š:
1. ä½¿ç”¨ Read å·¥å…·è¯»å– pom.xml
2. åˆ†æä¾èµ–åˆ—è¡¨
3. æ€»ç»“ä¸»è¦ä¾èµ–åŠå…¶ç”¨é€”
```

#### ç¤ºä¾‹ 2: ä»£ç æœç´¢
```
> åœ¨é¡¹ç›®ä¸­æŸ¥æ‰¾æ‰€æœ‰çš„ TODO æ³¨é‡Š

AI ä¼š:
1. ä½¿ç”¨ Grep å·¥å…·æœç´¢ "TODO"
2. åˆ—å‡ºæ‰€æœ‰åŒ…å« TODO çš„æ–‡ä»¶
3. å¯èƒ½å»ºè®®æŸ¥çœ‹å…·ä½“å†…å®¹
```

#### ç¤ºä¾‹ 3: åˆ›å»ºæ–°æ–‡ä»¶
```
> åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥å…·ç±» StringUtils.java,åŒ…å«å¸¸ç”¨çš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•

AI ä¼š:
1. è®¾è®¡åˆé€‚çš„ StringUtils ç±»
2. ä½¿ç”¨ Write å·¥å…·åˆ›å»ºæ–‡ä»¶
3. åŒ…å«å¸¸ç”¨æ–¹æ³•å¦‚ isEmpty, trim, capitalize ç­‰
```

#### ç¤ºä¾‹ 4: ä»£ç é‡æ„
```
> å°† Main.java ä¸­çš„ processMessage æ–¹æ³•é‡å‘½åä¸º handleUserInput

AI ä¼š:
1. ä½¿ç”¨ Read å·¥å…·è¯»å– Main.java
2. ä½¿ç”¨ Edit å·¥å…·è¿›è¡Œç²¾ç¡®æ›¿æ¢
3. ç¡®è®¤ä¿®æ”¹å®Œæˆ
```

#### ç¤ºä¾‹ 5: é¡¹ç›®æ„å»º
```
> è¿è¡Œ Maven æ„å»ºå¹¶å‘Šè¯‰æˆ‘æ˜¯å¦æˆåŠŸ

AI ä¼š:
1. ä½¿ç”¨ Bash å·¥å…·æ‰§è¡Œ mvn clean package
2. åˆ†ææ„å»ºè¾“å‡º
3. æŠ¥å‘Šæ„å»ºç»“æœå’Œä»»ä½•é”™è¯¯
```

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°å·¥å…·

1. **åˆ›å»ºå·¥å…·ç±»**
```java
@Slf4j
public class MyCustomTool implements Tool {

    @Override
    public String getName() {
        return "MyTool";
    }

    @Override
    public String getDescription() {
        return "Description of what this tool does";
    }

    @Override
    public ToolResult execute(String parameters) throws Exception {
        // è§£æå‚æ•°
        JsonNode params = MAPPER.readTree(parameters);

        // æ‰§è¡Œé€»è¾‘
        // ...

        // è¿”å›ç»“æœ
        return ToolResult.success("Result message");
    }
}
```

2. **æ³¨å†Œå·¥å…·**
åœ¨ `CodeAssistantAgent` æ„é€ å‡½æ•°ä¸­:
```java
registerTool(new MyCustomTool());
```

3. **æ›´æ–° Tool æ¥å£çš„ @JsonSubTypes**
```java
@JsonSubTypes.Type(value = MyCustomTool.class, name = "mytool")
```

### æ”¯æŒå…¶ä»– AI æ¨¡å‹

ä¿®æ”¹ `CodeAssistantAgent` æ„é€ å‡½æ•°:

```java
// OpenAI
this.chatModel = OpenAiChatModel.builder()
    .apiKey(apiKey)
    .modelName("gpt-4-turbo-preview")
    .build();

// æœ¬åœ°æ¨¡å‹(å¦‚ Ollama)
this.chatModel = OllamaChatModel.builder()
    .baseUrl("http://localhost:11434")
    .modelName("llama2")
    .build();
```

### æ·»åŠ æ–°çš„ UI ç»„ä»¶

å¯ä»¥åˆ›å»ºé¢å¤–çš„ UI æ¨¡å—:
- Web ç•Œé¢(åŸºäº Spring Boot)
- GUI ç•Œé¢(åŸºäº JavaFX)
- RESTful API æ¥å£

## æœ€ä½³å®è·µ

### 1. API Key å®‰å…¨
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Key
- ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å®‰å…¨çš„å¯†é’¥ç®¡ç†ç³»ç»Ÿ
- åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­æ’é™¤åŒ…å«å¯†é’¥çš„é…ç½®æ–‡ä»¶

### 2. é”™è¯¯å¤„ç†
- å§‹ç»ˆéªŒè¯å·¥å…·å‚æ•°
- æä¾›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯
- è®°å½•å¼‚å¸¸ä»¥ä¾¿è°ƒè¯•

### 3. æ€§èƒ½ä¼˜åŒ–
- é™åˆ¶æ–‡ä»¶è¯»å–å¤§å°
- å¯¹å¤§å‹æœç´¢ä»»åŠ¡ä½¿ç”¨åˆ†é¡µ
- åˆç†è®¾ç½®å‘½ä»¤è¶…æ—¶

### 4. ç”¨æˆ·ä½“éªŒ
- æä¾›åŠæ—¶çš„åé¦ˆ
- ä½¿ç”¨æ¸…æ™°çš„è¾“å‡ºæ ¼å¼
- æ”¯æŒå–æ¶ˆé•¿æ—¶é—´æ“ä½œ

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åˆ‡æ¢åˆ°ä¸åŒçš„ Claude æ¨¡å‹?
A: ä½¿ç”¨ `--model` å‚æ•°æˆ–ä¿®æ”¹ `application.properties` ä¸­çš„ `ai.model.name`ã€‚

### Q: å·¥å…·æ‰§è¡Œå¤±è´¥æ€ä¹ˆåŠ?
A: æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ `logs/kejiCode.log` è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚

### Q: å¦‚ä½•é™åˆ¶å·¥å…·è®¿é—®çš„ç›®å½•?
A: å¯ä»¥åœ¨å·¥å…·å®ç°ä¸­æ·»åŠ è·¯å¾„ç™½åå•æ£€æŸ¥ã€‚

### Q: æ”¯æŒå“ªäº›æ“ä½œç³»ç»Ÿ?
A: æ”¯æŒ Linux, macOS å’Œ Windowsã€‚Bash å·¥å…·åœ¨ Windows ä¸Šä½¿ç”¨ cmd.exeã€‚

### Q: å¦‚ä½•æé«˜å“åº”é€Ÿåº¦?
A: å¯ä»¥é™ä½ `max.tokens` è®¾ç½®,æˆ–ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹(å¦‚ Claude Haiku)ã€‚

## æœªæ¥æ”¹è¿›æ–¹å‘

1. **æ›´å¤šå·¥å…·æ”¯æŒ**
   - Git æ“ä½œå·¥å…·
   - Docker å‘½ä»¤å·¥å…·
   - æ•°æ®åº“æŸ¥è¯¢å·¥å…·
   - API æµ‹è¯•å·¥å…·

2. **æ™ºèƒ½åŠŸèƒ½å¢å¼º**
   - ä»£ç è‡ªåŠ¨è¡¥å…¨
   - æ™ºèƒ½é‡æ„å»ºè®®
   - æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ
   - æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

3. **ç”¨æˆ·ç•Œé¢æ”¹è¿›**
   - è¯­æ³•é«˜äº®
   - åˆ†å±æ˜¾ç¤º
   - å¿«æ·é”®æ”¯æŒ
   - ä¸»é¢˜å®šåˆ¶

4. **åä½œåŠŸèƒ½**
   - å¤šç”¨æˆ·æ”¯æŒ
   - ä¼šè¯å…±äº«
   - å›¢é˜Ÿé…ç½®åŒæ­¥

5. **æ€§èƒ½ä¼˜åŒ–**
   - å·¥å…·è°ƒç”¨ç¼“å­˜
   - å¹¶å‘å·¥å…·æ‰§è¡Œ
   - å¢é‡æ–‡ä»¶å¤„ç†

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®!

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª Java å‘½åçº¦å®š
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œæ–¹æ³•å
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¼–å†™å•å…ƒæµ‹è¯•
- ä¿æŒä»£ç æ•´æ´

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®,è¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»:
- æäº¤ Issue
- å‘èµ· Discussion
- å‘é€é‚®ä»¶

## è‡´è°¢

- [LangChain4j](https://github.com/langchain4j/langchain4j) - ä¼˜ç§€çš„ Java AI æ¡†æ¶
- [Anthropic](https://www.anthropic.com/) - å¼ºå¤§çš„ Claude AI æ¨¡å‹
- [Claude Code](https://claude.com/claude-code) - è®¾è®¡çµæ„Ÿæ¥æº

---

**Happy Coding with AI! ğŸš€**
